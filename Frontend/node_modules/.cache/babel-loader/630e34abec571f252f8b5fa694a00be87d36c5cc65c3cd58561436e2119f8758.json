{"ast":null,"code":"let defaultState = {\n  basket: [{\n    id: 1,\n    name: 'Велосипед',\n    count: 2\n  }, {\n    id: 2,\n    name: 'Самокат',\n    count: 3\n  }, {\n    id: 3,\n    name: 'Ролики',\n    count: 4\n  }]\n};\nconst ADD_PRODUCT = 'ADD_PRODUCT';\nconst REM_PRODUCT = 'ADD_PRODUCT';\nconst ADD_MORE_PRODUCTS = 'ADD_PRODUCTS';\nexport const basketReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case ADD_PRODUCT:\n      return {\n        ...state,\n        basket: state.basket.map(elem => {\n          if (elem.id == action.payload) {\n            elem.count = elem.count + 1;\n          }\n          return elem;\n        })\n      };\n    case REM_PRODUCT:\n      let basketGood = state.basket.find(elem => elem.id == action.payload);\n      if (basketGood.count == 1) {\n        return {\n          ...state,\n          basket: state.basket.filter(elem => elem.id != action.payload)\n        };\n      } else {\n        return {\n          ...state,\n          basket: state.basket.map(elem => {\n            if (elem.id == action.payload) {\n              elem.count = elem.count - 1;\n            }\n            return elem;\n          })\n        };\n      }\n    case ADD_MORE_PRODUCTS:\n      let newGood = state.basket.find(elem => elem.name == action.payload);\n      if (newGood) {\n        return {\n          ...state,\n          basket: state.basket.map(elem => {\n            if (elem.id == newGood.id) {\n              elem.count = elem.count + 1;\n            }\n            return elem;\n          })\n        };\n      } else {\n        return {\n          ...state,\n          basket: [...state.basket, {\n            id: Math.max(...state.basket.map(elem => elem.id)) + 1,\n            name: action.payload,\n            count: 1\n          }]\n        };\n      }\n    default:\n      return state;\n  }\n};\nexport const addProductAction = payload => ({\n  type: ADD_PRODUCT,\n  payload\n});\nexport const remProductAction = payload => ({\n  type: REM_PRODUCT,\n  payload\n});\nexport const addMoreProductAction = payload => ({\n  type: ADD_MORE_PRODUCTS,\n  payload\n});","map":{"version":3,"names":["defaultState","basket","id","name","count","ADD_PRODUCT","REM_PRODUCT","ADD_MORE_PRODUCTS","basketReducer","state","action","type","map","elem","payload","basketGood","find","filter","newGood","Math","max","addProductAction","remProductAction","addMoreProductAction"],"sources":["/Users/azadatca/Desktop/Tel-RanProject/myapp/src/store/basketReducer.js"],"sourcesContent":["let defaultState = {\n    basket: [\n        {id: 1, name: 'Велосипед', count: 2},\n        {id: 2, name: 'Самокат', count: 3},\n        {id: 3, name: 'Ролики', count: 4}\n    ]\n}\n\nconst ADD_PRODUCT = 'ADD_PRODUCT'\nconst REM_PRODUCT = 'ADD_PRODUCT'\nconst ADD_MORE_PRODUCTS = 'ADD_PRODUCTS'\n\n\nexport const basketReducer = (state = defaultState, action) => {\n    switch (action.type){\n        case ADD_PRODUCT:\n            return {...state, basket: state.basket.map(elem => {\n                if (elem.id == action.payload){\n                    elem.count = elem.count + 1\n                }\n                return elem\n            })}\n       \n        case REM_PRODUCT:\n            let basketGood = state.basket.find(elem => elem.id == action.payload)\n            if (basketGood.count == 1){\n                return {...state, basket: state.basket.filter(elem => elem.id != action.payload)}\n            } else {\n                return {...state, basket: state.basket.map(elem => {\n                    if (elem.id == action.payload){\n                        elem.count = elem.count - 1\n                    }\n                    return elem\n                })}\n            }\n        case ADD_MORE_PRODUCTS:\n            let newGood = state.basket.find(elem => elem.name == action.payload)\n            if (newGood) {\n                return {...state, basket: state.basket.map(elem => {\n                    if (elem.id == newGood.id){\n                        elem.count = elem.count + 1\n                    }\n                    return elem\n                })}\n            } else {\n                return {...state, basket: [...state.basket, \n                    {\n                        id: Math.max(...state.basket.map(elem => elem.id)) + 1,\n                        name: action.payload,\n                        count: 1\n                    }]}\n            }\n        default: \n            return state\n    }\n}\n\n\nexport const addProductAction = (payload) => ({type: ADD_PRODUCT, payload}) \nexport const remProductAction = (payload) => ({type: REM_PRODUCT, payload}) \nexport const addMoreProductAction = (payload) => ({type: ADD_MORE_PRODUCTS, payload})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}